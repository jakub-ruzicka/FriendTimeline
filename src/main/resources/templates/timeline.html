<!doctype html>
<html lang="cs" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Timeline</title>
    <link rel="stylesheet" href="/css/timeline.css" />
</head>

<body>
<header class="topbar">
    <a class="topbar__back" href="/">← Zpět</a>
    <h1 class="topbar__title">Naše timeline</h1>
</header>

<main class="timeline" id="timeline"
      th:attr="data-count=${#lists.size(entries)}">

    <!-- Background pattern is done via CSS on body/timeline -->

    <section class="timeline__stage" id="stage" aria-label="Timeline stage">
        <svg class="snake" id="snakeSvg"
             xmlns="http://www.w3.org/2000/svg"
             preserveAspectRatio="none"
             aria-hidden="true">
            <path id="snakePath" class="snake__path" d=""></path>
            <g id="snakeDots" class="snake__dots"></g>
        </svg>

        <!-- Labels rendered/positioned by JS -->
        <div class="labels" id="labels" aria-hidden="false"></div>

        <!-- Data for JS (rendered by Thymeleaf) -->
        <script th:inline="javascript">
            /*<![CDATA[*/
            window.TIMELINE_ENTRIES = /*[[${entries}]]*/ [];
            /*]]>*/
        </script>

        <!-- Hidden accessible list (screen readers + fallback) -->
        <ol class="sr-list" aria-label="Milníky">
            <li th:each="e, stat : ${entries}"
                th:attr="id=${'item-' + stat.index}">
                <button type="button"
                        class="sr-list__btn"
                        th:attr="data-index=${stat.index}"
                        th:text="${#temporals.format(e.datumFotky, 'd.M.yyyy')} + ' — ' + ${e.popis}">
                    item
                </button>
            </li>
        </ol>
    </section>
</main>

<!-- Modal -->
<div class="modal" id="modal" hidden>
    <div class="modal__backdrop" data-close="backdrop"></div>

    <div class="modal__dialog"
         role="dialog"
         aria-modal="true"
         aria-labelledby="modalTitle"
         aria-describedby="modalDesc"
         tabindex="-1">
        <button class="modal__close" type="button" aria-label="Zavřít" data-close="x">×</button>

        <div class="modal__content">
            <div class="modal__media">
                <img id="modalImg" alt="" />
                <div class="modal__imgFallback" id="modalImgFallback" hidden>Image not found</div>
            </div>

            <div class="modal__text">
                <div class="modal__date" id="modalTitle">—</div>
                <p class="modal__desc" id="modalDesc"></p>
            </div>
        </div>
    </div>
</div>

<script src="/js/timeline.js" defer></script>
</body>
</html>